:root{--font-primary: "Press Start 2P", cursive;--font-secondary: "Roboto Mono", monospace;--color-background: #1a1a1a;--color-surface: #2a2a2a;--color-surface-light: #333;--color-text-primary: #e0e0e0;--color-text-secondary: #aaa;--color-accent: #61dafb;--color-gold: #ffd700;--color-prestige: #e040fb;--color-riposte: #8e44ad;--color-success: #28a745;--color-error: #dc3545;--color-hp: #e53935;--color-xp: #ffd700;--color-shield: #00BFFF;--border-color-dark: #444;--border-color-light: #555;--border-color-highlight: #777;--rarity-defective: #9E9E9E;--rarity-common: #E0E0E0;--rarity-magic: #8AB4F8;--rarity-rare: #FDD663;--rarity-epic: #BB86FC;--rarity-legendary: #FF8A65;--rarity-mythic: #F06292;--rarity-artifact: #4DD0E1}body{background-color:#1a1a1a;color:#e0e0e0;font-family:Roboto Mono,monospace;text-align:center}h1,h2,h3{font-family:"Press Start 2P",cursive;color:#61dafb;text-shadow:0 0 5px rgba(97,218,251,.5)}h1{font-size:2em}h2{font-size:1.2em}h3{font-size:1em;margin-top:20px}.hidden{display:none!important}#game-world{display:flex;justify-content:space-around;align-items:flex-start;margin-top:20px}#game-status-message{font-size:1.2em;font-weight:700;color:#ffc107;min-height:1.5em}#currency-display{text-align:left;margin-bottom:10px}#currency-display p{margin:4px 0}#soul-echos-display{color:#e040fb;font-weight:700}#game-utility-controls{position:fixed;top:15px;left:20px;z-index:2000;display:flex;gap:10px;align-items:center}#tavern-btn{background-color:var(--color-surface);border-color:var(--border-color-light);color:#8b4513;text-shadow:0 0 5px rgba(139,69,19,.7)}#tavern-btn:hover{background-color:var(--color-surface-light);border-color:sienna;color:sienna}button{font-family:var(--font-primary),cursive;font-size:.7em;border:2px solid var(--border-color-dark);border-top-color:var(--border-color-highlight);border-left-color:var(--border-color-highlight);background-color:var(--color-surface-light);color:var(--color-text-primary);padding:8px 12px;cursor:pointer}button:hover:not(:disabled){background-color:var(--border-color-dark)}button:active:not(:disabled){border-top-color:var(--border-color-dark);border-left-color:var(--border-color-dark);border-bottom-color:var(--border-color-highlight);border-right-color:var(--border-color-highlight)}button:disabled{cursor:not-allowed;opacity:.5}.utility-btn{background-color:var(--color-surface);border-color:var(--border-color-light);color:var(--color-accent)}.utility-btn:hover:not(:disabled){background-color:var(--color-surface-light);border-color:var(--color-accent)}.item-actions{display:flex;flex-direction:column;align-items:flex-end;margin-left:10px}.item-action-btn{padding:8px 12px}.utility-icon-btn{font-size:1.2em;padding:5px 8px;background:none;border:2px solid var(--border-color-light)}.utility-icon-btn:hover{border-color:var(--border-color-highlight);color:#fff}#boost-heal-btn{font-size:1.5em;padding:0;line-height:1;background:none;border:none;color:var(--color-hp);text-shadow:0 0 8px var(--color-hp);animation:pulse-heart 1.5s infinite}#boost-heal-btn:hover{transform:scale(1.1)}.buy-btn{background-color:var(--color-gold);color:var(--color-background)}.buy-btn:hover:not(:disabled){background-color:#ffec80}.pickup-btn{background-color:var(--color-success);color:#fff}.pickup-btn:hover{background-color:#218838}.discard-btn{background-color:var(--color-error);color:#fff}.discard-btn:hover{background-color:#c82333}#soft-reset-btn{background-color:var(--color-error);color:#fff;box-shadow:none}#soft-reset-btn:hover{background-color:#c82333}#prestige-btn{background-color:var(--color-prestige);color:#fff;box-shadow:0 0 8px var(--color-prestige)}#prestige-btn:hover{background-color:#c82333}.refresh-shop-btn{border:none;background:none;color:var(--color-gold);font-size:1.8em;padding:0;line-height:1;text-shadow:0 0 8px rgba(255,215,0,.7);transition:transform .3s ease-in-out,text-shadow .2s}.refresh-shop-btn:hover:not(:disabled){transform:rotate(180deg)}.shop-utility-btn{border:none;background:none;color:var(--color-text-secondary);font-size:1.8em;cursor:pointer;padding:0;line-height:1;transition:color .2s,text-shadow .2s}.shop-utility-btn:hover{background:none;color:var(--color-text-primary)}.shop-utility-btn.active{color:var(--color-gold);text-shadow:0 0 8px rgba(255,215,0,.7)}@keyframes pulse-heart{0%{transform:scale(1)}50%{transform:scale(1.15)}to{transform:scale(1)}}.panel{background-color:var(--color-surface);border:4px solid var(--border-color-light);border-top-color:var(--border-color-highlight);border-left-color:var(--border-color-highlight);padding:15px;width:32%;min-height:400px;position:relative}.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.panel-header h2{margin:0}#party-scores-container{display:flex;gap:8px}.party-score-widget{font-family:var(--font-primary);font-size:.8em;display:flex;align-items:center;gap:5px;border:1px solid var(--border-color-dark);padding:3px 8px;border-radius:4px;background-color:var(--color-background)}#party-power-display{color:var(--color-gold)}#party-combat-rating-display{color:var(--color-error)}#inventory-panel{width:100%;margin:0;min-height:auto;border:none;padding:10px 0 0}.inventory-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding:0 15px}.inventory-header h2{margin:0;display:flex;align-items:baseline}#right-panels-container{padding:0;overflow:hidden}#enemy-panel{cursor:pointer;position:relative}#monster-area #monster-name{min-height:3em;display:flex;align-items:center;justify-content:center;padding:0 10px;margin:0}.pause-button{position:absolute;top:10px;left:10px;z-index:10;padding:8px 12px;font-size:.7em;background-color:var(--color-accent);color:var(--color-text-light);border:2px solid var(--border-color-dark);border-radius:5px;cursor:pointer;transition:background-color .2s,transform .1s;box-shadow:2px 2px 5px #0000004d}.pause-button:hover{background-color:var(--color-accent-dark);transform:translateY(-1px)}.pause-button:active{transform:translateY(1px);box-shadow:1px 1px 3px #0000004d}.pause-button.active-pause{background-color:var(--color-error)}.tab-buttons{display:flex;border-bottom:4px solid var(--border-color-light)}.tab-btn{flex-grow:1;padding:10px;font-size:.8em;border:none;border-bottom:4px solid transparent;background-color:var(--color-surface);margin-bottom:-4px;transition:background-color .2s,border-color .2s}.tab-btn:hover{background-color:var(--color-surface-light)}.tab-btn.active{background-color:var(--color-surface-light);border-color:var(--color-accent);color:var(--color-accent)}.tab-btn.locked-tab{color:var(--color-text-secondary);cursor:not-allowed;opacity:.6}.tab-btn.locked-tab:hover{background-color:var(--color-surface);border-color:transparent}.locked-feature-message{text-align:center;padding:20px;color:var(--color-text-secondary)}.locked-feature-message h2{color:var(--color-gold);margin-bottom:15px}.locked-feature-message p{margin-bottom:10px}.tab-content{display:none;padding:15px;position:relative}#inventory-panel.tab-content{padding:0}#inventory-grid{padding:0 15px 15px}.tab-content.active{display:block}#loot-container{margin-top:15px;border-top:2px solid var(--border-color-light);padding-top:10px}.loot-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.loot-header h4{margin:0;font-family:var(--font-primary);font-size:1em;color:var(--color-text-primary);display:flex;align-items:baseline}.loot-header .btn{padding:6px 10px;font-size:.7em}#loot-area{min-height:50px}.hero-card.recovering{opacity:.5}.hero-card.is-low-hp{animation:pulse-red 1.5s infinite}.hero-card.drag-over{background-color:#4a4a4a;border-color:var(--color-gold);transform:scale(1.02)}.hero-card{background-color:var(--color-surface-light);border:2px solid var(--border-color-dark);border-top-color:var(--border-color-highlight);border-left-color:var(--border-color-highlight);padding:10px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;transition:all .2s ease-in-out}.hero-card.equip-mode{border-color:var(--color-accent);box-shadow:0 0 10px var(--color-accent)}.hero-title{display:flex;justify-content:space-between;align-items:flex-start;position:relative;gap:10px}.hero-title-text{display:flex;flex-direction:column;align-items:flex-start}.hero-special-resource-container{display:flex;flex-wrap:wrap;gap:3px;padding-top:4px;justify-content:flex-end;flex-grow:1;max-width:50%}.resource-bar{width:12px;height:6px;border-radius:1px;border:1px solid rgba(0,0,0,.5)}.resource-bar.doubloon{background-color:var(--color-gold)}.resource-bar.beam-charge{background-color:var(--color-shield)}.hero-main-content{flex-grow:1;min-width:0;text-align:left}.hero-stats{font-size:.9em;margin:4px 0;color:var(--color-text-primary)}.hero-main-content .stats-btn{width:25px;height:25px;font-size:1em;margin:2px 0;display:flex;justify-content:center;align-items:center}.hero-stats.dps-text{text-align:center}.hero-controls{display:flex;flex-direction:column;margin-left:10px;gap:5px}.hero-controls .toggle-view-btn,.hero-controls .move-hero-btn{width:30px;height:30px;display:flex;justify-content:center;align-items:center;padding:0;font-size:1.2em;line-height:1}.hero-hp-container{position:relative;width:100%;height:10px;background-color:var(--color-background);border:1px solid #111;margin-top:4px}.hero-shield-bar{position:absolute;top:0;left:0;height:100%;background-color:var(--color-shield);opacity:.7;z-index:2;transition:width .1s linear}.power-score-preview{font-size:.9em;font-weight:700;text-align:center;margin-top:8px;padding-top:8px;border-top:1px dashed var(--border-color-light)}.hero-details-container{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}.stats-group{background-color:#2c2c2c;padding:8px;border:1px solid var(--border-color-dark);border-radius:4px}.stats-group h4{font-family:var(--font-secondary),monospace;font-size:.85em;color:var(--color-gold);margin:0 0 8px;padding-bottom:4px;border-bottom:1px solid var(--border-color-light);text-align:left;font-weight:400}.stats-group p{margin:3px 0;font-size:.85em;text-align:left;display:flex;justify-content:space-between;cursor:help}.stats-group p span:first-child{color:var(--color-text-secondary)}.stats-group p span:last-child{color:var(--color-text-primary);font-weight:700}.stat-increase{color:var(--color-success)}.stat-decrease{color:var(--color-error)}.hero-card.collapsed .hero-details-container,.hero-card.collapsed .hero-xp-bar,.hero-card.collapsed .xp-text,.hero-card.collapsed .hero-equipment-display,.hero-card.collapsed .buffs-container,.hero-card.collapsed .power-score-preview{display:none}.hero-card:not(.collapsed) .collapsed-buffs-container{display:none}.hero-card .collapsed-info{display:none}.hero-card.collapsed .collapsed-info{display:block;margin-top:5px}.hero-card.collapsed{align-items:flex-start;padding-top:5px;padding-bottom:5px}.hero-card.collapsed .hero-controls{flex-direction:column;align-items:center;margin-left:auto}.hero-equipment-display{font-size:.85em;margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:2px 10px}.equipped-item{background:#222;padding:3px 6px;margin-bottom:2px;display:flex;justify-content:space-between;align-items:center;min-width:0}.equipped-item-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;text-align:left;margin-right:10px;min-width:0}.buffs-container{display:flex;gap:4px;margin-top:5px;min-height:24px}.buff-icon{position:relative;width:22px;height:22px;background-color:#4f4f4f;border:1px solid #888;border-radius:4px;color:#fff;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:help;overflow:hidden}.buff-duration-bar{position:absolute;bottom:0;left:0;height:3px;background-color:#fff9;transition:width .2s linear}.collapsed-buffs-container{display:flex;gap:3px;justify-content:flex-start;margin-top:4px;min-height:16px}.collapsed-buff-icon{position:relative;width:14px;height:14px;background-color:#4f4f4f;border:1px solid #888;border-radius:3px;color:#fff;font-size:9px;font-weight:700;display:flex;align-items:center;justify-content:center;cursor:help;overflow:hidden}.collapsed-buff-icon .buff-duration-bar{height:2px}.progress-bar-container{width:100%;height:10px;background-color:var(--color-background);border:1px solid #111;margin-top:4px}.hero-xp-bar.progress-bar-container{height:5px}.progress-bar-fill{height:100%;width:0%;transition:width .1s linear}.progress-bar-fill.no-transition{transition:none!important}.progress-bar-fill.hp{background-color:var(--color-hp)}.progress-bar-fill.xp{background-color:var(--color-xp)}.xp-text{font-size:.8em;color:var(--color-text-secondary);margin-bottom:2px}.monster-hp-container p{margin:8px 0 4px}#floating-text-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5000}.floating-text{position:absolute;font-family:var(--font-primary),cursive;font-size:1.2em;font-weight:700;text-shadow:2px 2px #000;animation:floatUp 1.5s ease-out forwards;transition:transform .1s ease-out}.floating-text.damage{color:var(--color-error)}.floating-text.crit{color:var(--color-gold);font-size:1.5em}.floating-text.heal{color:var(--color-success)}.floating-text.pop{animation:pop .2s ease-out}.floating-text.shield{color:var(--color-shield)}.floating-text.lifesteal{color:var(--color-prestige)}.floating-text.beam{color:var(--color-shield)}.flavor-text{font-size:1.4em;animation:flavorPop .8s ease-out forwards}.flavor-text.crit-text{color:var(--color-gold)}.flavor-text.defense-text{color:var(--color-accent)}#protector-beam-visual{animation:pulse-beam 1.5s infinite ease-in-out!important}#notification-area{position:fixed;bottom:20px;left:50%;transform:translate(-50%);z-index:3000;display:flex;flex-direction:column;align-items:center;gap:10px}.notification{padding:10px 20px;border-radius:5px;color:#fff;font-weight:700;opacity:0;transform:translateY(20px);transition:opacity .5s,transform .5s;background-color:var(--color-surface)}.notification.show{opacity:1;transform:translateY(0)}.notification.error{background-color:var(--color-error)}.notification.success{background-color:var(--color-success)}.notification.riposte{background-color:var(--color-riposte)}.notification.info{background-color:#1481b8}#save-indicator{position:fixed;top:15px;right:20px;background-color:#282c34;color:#fff;padding:8px 15px;border-radius:5px;border:1px solid var(--color-accent);display:flex;align-items:center;font-size:1em;opacity:1;transition:opacity .5s ease-in-out;z-index:1000}#save-indicator.hidden{opacity:0;pointer-events:none}#save-indicator .icon{margin-right:10px;font-size:1.2em}#save-indicator.saving .icon{animation:spin .5s linear infinite}@keyframes floatUp{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-80px)}}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.4)}to{transform:scale(1)}}@keyframes flavorPop{0%{opacity:0;transform:translateY(20px) scale(.5) translate(-50%)}20%{opacity:1;transform:translateY(0) scale(1.2) translate(-50%)}80%{opacity:1;transform:translateY(0) scale(1) translate(-50%)}to{opacity:0;transform:translateY(-10px) scale(.8) translate(-50%)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse-red{0%{box-shadow:0 0 5px #f4433666}50%{box-shadow:0 0 15px 3px #f44336cc}to{box-shadow:0 0 5px #f4433666}}@keyframes flash-yellow{0%{color:var(--color-text-primary);text-shadow:none}25%{color:var(--color-gold);text-shadow:0 0 10px var(--color-gold);transform:scale(1.5)}to{color:var(--color-text-primary);text-shadow:none;transform:scale(1)}}@keyframes pulse-beam{0%{transform:scale(1) translate(-50%);text-shadow:0 0 5px var(--color-shield)}50%{transform:scale(1.1) translate(-50%);text-shadow:0 0 15px var(--color-shield)}to{transform:scale(1) translate(-50%);text-shadow:0 0 5px var(--color-shield)}}.item-card{background-color:var(--color-background-light);border:1px solid var(--color-border);border-radius:var(--border-radius);padding:.8rem;display:flex;flex-direction:column;gap:.25rem;box-shadow:0 2px 4px #0000001a;transition:all .2s ease-in-out;position:relative;margin-bottom:10px}.item-card:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.item-card-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--color-border);padding-bottom:.4rem;margin-bottom:.4rem}.item-name{font-weight:700;font-size:1.1rem;color:var(--color-text-primary)}.item-level{font-size:.9rem;color:var(--color-text-muted)}.item-stats{display:flex;flex-direction:column;gap:.1rem;flex-grow:1;text-align:left}.item-stat-line{font-size:.8em;margin:0;text-align:left}.item-stat-line.implicit-stat{color:var(--color-accent);font-style:italic}.item-unique-effect{font-style:italic;color:var(--rarity-legendary);font-size:.85rem;margin-top:.5rem;padding-top:.5rem;border-top:1px dashed var(--border-color-light)}.item-card-footer{margin-top:auto;padding-top:.5rem;border-top:1px solid var(--color-border);display:flex;justify-content:space-between;align-items:center;gap:1rem}.item-cost{font-weight:700;color:var(--color-gold);margin:0}.item-card.rarity-defective{border:1px solid var(--rarity-defective);border-left:5px solid var(--rarity-defective)}.item-card.rarity-defective .item-name{color:var(--rarity-defective)}.item-card.rarity-common{border:1px solid var(--rarity-common);border-left:5px solid var(--rarity-common)}.item-card.rarity-common .item-name{color:var(--rarity-common)}.item-card.rarity-magic{border:1px solid var(--rarity-magic);border-left:5px solid var(--rarity-magic)}.item-card.rarity-magic .item-name{color:var(--rarity-magic)}.item-card.rarity-rare{border:1px solid var(--rarity-rare);border-left:5px solid var(--rarity-rare)}.item-card.rarity-rare .item-name{color:var(--rarity-rare)}.item-card.rarity-epic{border:1px solid var(--rarity-epic);border-left:5px solid var(--rarity-epic)}.item-card.rarity-epic .item-name{color:var(--rarity-epic)}.item-card.rarity-legendary{border:1px solid var(--rarity-legendary);border-left:5px solid var(--rarity-legendary);animation:legendary-glow 2s infinite alternate}.item-card.rarity-legendary .item-name{color:var(--rarity-legendary)}.item-card.rarity-mythic{border:1px solid var(--rarity-mythic);border-left:5px solid var(--rarity-mythic);animation:mythic-glow 1.8s infinite alternate}.item-card.rarity-mythic .item-name{color:var(--rarity-mythic)}.item-card.rarity-artifact{border:1px solid var(--rarity-artifact);border-left:5px solid var(--rarity-artifact);animation:artifact-glow 1.5s infinite alternate}.item-card.rarity-artifact .item-name{color:var(--rarity-artifact)}@keyframes legendary-glow{0%{box-shadow:0 0 5px 0 var(--rarity-legendary)}to{box-shadow:0 0 15px 5px var(--rarity-legendary)}}@keyframes mythic-glow{0%{box-shadow:0 0 8px 0 var(--rarity-mythic)}to{box-shadow:0 0 20px 6px var(--rarity-mythic)}}@keyframes artifact-glow{0%{box-shadow:0 0 10px 0 var(--rarity-artifact)}to{box-shadow:0 0 25px 8px var(--rarity-artifact)}}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:9999}.modal-content{background-color:var(--color-surface);border:4px solid var(--border-color-light);border-top-color:var(--border-color-highlight);border-left-color:var(--border-color-highlight);padding:20px;border-radius:8px;box-shadow:0 0 20px #00000080;text-align:center;max-width:400px;width:90%}.modal-content p{margin-bottom:20px;font-size:1.1em;color:var(--color-text-primary);white-space:pre-wrap}.modal-buttons{display:flex;justify-content:center;gap:15px}.modal-buttons button{font-size:.8em;padding:10px 15px;min-width:100px}.modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color-light);padding-bottom:10px;margin-bottom:15px}.modal-header h2{margin:0;flex-grow:1}.close-btn{font-family:var(--font-secondary),monospace;font-size:1.2em;background:none;border:none;padding:5px 10px}#offline-progress-overlay{z-index:10000}.offline-progress-content{background-color:var(--color-surface);border:2px solid var(--color-accent);padding:30px 40px;border-radius:8px;box-shadow:0 0 20px #61dafb4d;text-align:center}.offline-progress-content h3{margin:0;color:var(--color-accent)}.options-modal{max-width:600px;text-align:left}.option-wrapper{display:flex;align-items:flex-start;margin-bottom:20px}.option-wrapper input[type=checkbox]{width:20px;height:20px;margin-right:15px;flex-shrink:0;margin-top:4px}.option-wrapper label{font-weight:700;font-size:1.1em}.option-wrapper .option-help{font-size:.9em;color:var(--color-text-secondary);margin:4px 0 0}.danger-zone{margin-top:25px;padding-top:15px;border-top:2px solid var(--color-error)}.danger-zone h3{color:var(--color-error);margin-bottom:15px;text-align:center}.danger-zone .danger-btn{width:100%;background-color:var(--color-error);color:#fff;padding:12px;font-size:.9em;border:1px solid #ff7979}.danger-zone .danger-btn:not(:last-child){margin-bottom:10px}.danger-zone .danger-btn:hover{background-color:#c82333}.tavern-modal-content{width:90vw;height:90vh;max-width:none;display:flex;flex-direction:column;padding:0;background-color:var(--color-surface);border-color:#8b4513;border-top-color:sienna;border-left-color:sienna}.tavern-modal-content .modal-header{padding:15px;border-bottom:1px solid var(--border-color-dark);margin-bottom:0}.tavern-modal-content .modal-header h2{color:#d2691e;text-shadow:0 0 5px rgba(210,105,30,.5)}.header-renown-display{font-size:1.1em;font-weight:700;color:var(--color-gold);margin:0 20px;white-space:nowrap}.tavern-body{display:flex;flex-direction:column;flex-grow:1;min-height:0}.tavern-body .tab-buttons{border-bottom:4px solid var(--border-color-dark)}.tavern-body .tab-btn{background-color:var(--color-surface-light);color:var(--color-text-secondary)}.tavern-body .tab-btn.active{background-color:var(--color-background);border-color:#d2691e;color:#d2691e}.tavern-body .tab-content{display:none;flex-grow:1;flex-direction:column;overflow-y:auto;padding:15px;background-color:var(--color-background)}.tavern-body .tab-content.active{display:flex}.tavern-body .tab-content p{text-align:center;font-style:italic;color:var(--color-text-secondary)}#contracts-columns-container{display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px;flex-grow:1;min-height:0}.contract-column{display:flex;flex-direction:column;background-color:var(--color-surface);padding:10px;border:1px solid var(--border-color-dark);border-radius:4px;min-height:0}.contract-column h4{margin:0 0 10px;padding-bottom:10px;border-bottom:2px solid var(--border-color-light);color:var(--color-gold);text-align:center;font-size:1em;display:flex;justify-content:center;align-items:baseline}.contract-list{display:flex;flex-direction:column;gap:10px;overflow-y:auto;flex-grow:1;padding:5px}.contract-card{background-color:var(--color-surface-light);border:2px solid var(--border-color-dark);padding:10px;text-align:left;display:flex;flex-direction:column;gap:5px}.contract-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color-dark);padding-bottom:5px;margin-bottom:5px}.contract-name{font-weight:700;color:var(--color-text-primary);font-size:1em}.contract-type{font-size:.8em;color:var(--color-accent);background-color:#61dafb1a;padding:2px 5px;border-radius:3px}.contract-description{font-size:.9em;color:var(--color-text-secondary);margin:0;flex-grow:1}.contract-rewards{font-size:.85em;color:var(--color-gold);margin-top:5px}.contract-actions{display:flex;justify-content:flex-end;align-items:center;gap:10px;margin-top:10px}.contract-actions .btn{padding:6px 12px;font-size:.75em}#tavern-refresh-contracts-btn{margin-top:15px;width:auto;align-self:center;background-color:var(--color-surface);border-color:var(--color-text-secondary);color:var(--color-text-primary);flex-shrink:0}#tavern-refresh-contracts-btn:hover{background-color:var(--color-surface-light);border-color:var(--color-gold);color:var(--color-gold)}.header-counter{font-family:var(--font-secondary);font-size:.8em;color:var(--color-text-secondary);font-weight:400;margin-left:8px}.goods-header-controls{display:flex;justify-content:flex-end;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid var(--border-color-dark)}.goods-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px;width:100%}.good-card{background-color:var(--color-surface-light);border:1px solid var(--border-color-dark);border-left:5px solid #D2691E;padding:15px;display:flex;flex-direction:column;text-align:left}.good-icon{font-size:2em;float:left;margin-right:15px}.good-name{font-family:var(--font-primary);font-size:1.1em;color:var(--color-text-primary);margin-bottom:5px}.good-description{font-size:.9em;color:var(--color-text-secondary);margin:0 0 10px;flex-grow:1}.good-effect,.good-duration{font-size:.9em;font-weight:700}.good-effect{color:var(--color-success)}.good-duration{color:var(--color-accent)}.good-footer{margin-top:auto;padding-top:10px;border-top:1px dashed var(--border-color-light)}.good-buy-btn{width:100%;padding:10px;font-size:.9em;background-color:var(--color-gold);color:var(--color-background)}.good-buy-btn:hover:not(:disabled){background-color:#ffec80}.good-buy-btn:disabled{background-color:var(--color-surface);color:var(--color-text-secondary);border:1px solid var(--border-color-dark)}.stats-modal-content{max-width:90vw;width:1200px;max-height:90vh;display:flex;flex-direction:column}.stats-modal-content .modal-body{display:flex;flex-direction:column;overflow-y:auto;flex-grow:1}.stats-modal-header{flex-shrink:0}.stats-modal-main{display:flex;flex-direction:column;gap:20px;margin-bottom:20px}.stats-modal-section{background-color:var(--color-background);padding:15px;border:1px solid var(--border-color-dark)}.stats-modal-section h3{margin-top:0;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid var(--border-color-light);color:var(--color-gold)}.stats-modal-stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:15px}.stats-modal-equipment-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.stats-modal-item-card{background-color:var(--color-surface-light);border:1px solid var(--color-border);border-radius:var(--border-radius);padding:.5rem;display:flex;flex-direction:column;gap:.25rem;font-size:.9em}.stats-modal-item-card.empty-slot{background-color:var(--color-background);border-style:dashed;color:var(--color-text-secondary);align-items:center;justify-content:center;min-height:80px}.stats-modal-item-card .item-card-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:.3rem;margin-bottom:.3rem;border-bottom:1px solid var(--border-color-light)}.stats-modal-item-card .slot-name{color:var(--color-text-secondary);font-style:italic}.stats-modal-item-card .item-name{font-weight:700}.stats-modal-item-card .item-stats{flex-grow:1}.stats-modal-item-card .item-stat-line{font-size:.9em;margin:0}.stats-modal-item-card .item-stat-line.implicit-stat{color:var(--color-accent);font-style:italic}.stats-modal-item-card .item-unique-effect{font-size:.9em;font-style:italic;color:var(--rarity-legendary);margin-top:.4rem;padding-top:.4rem;border-top:1px dashed var(--border-color-light)}.modal-title-container{display:flex;justify-content:space-between;align-items:center;width:100%;gap:15px}.modal-title-container h2{flex-grow:1;text-align:left}.modal-nav-controls{display:flex;gap:10px;flex-shrink:0}.modal-nav-controls .nav-btn{font-family:var(--font-secondary),monospace;font-size:1.2em;font-weight:700;background:none;border:2px solid var(--border-color-light);color:var(--color-text-primary);width:35px;height:35px;padding:0;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s}.modal-nav-controls .nav-btn:hover:not(:disabled){background-color:var(--color-surface-light);border-color:var(--color-accent);color:var(--color-accent)}.modal-nav-controls .nav-btn:disabled{opacity:.3;cursor:not-allowed;border-color:var(--border-color-dark)}.stats-modal-pie-charts{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.pie-chart-container{height:220px;position:relative}.time-charts-container{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.time-chart-item{background-color:var(--color-background);padding:15px;border:1px solid var(--border-color-dark);display:flex;flex-direction:column}.time-chart-item .chart-container{flex-grow:1}.time-chart-item canvas{width:100%!important;height:100%!important}.chart-container{position:relative;height:250px;width:100%}.chart-summary{display:flex;justify-content:space-around;margin-top:15px;padding-top:15px;border-top:1px solid var(--border-color-dark);font-size:.9em}.summary-metric{text-align:center}.summary-metric .value{font-size:1.2em;font-weight:700;color:var(--color-text-primary)}.summary-metric .label{color:var(--color-text-secondary)}.combat-log-container{margin-top:20px}.combat-log-list{height:150px;overflow-y:scroll;background-color:var(--color-background);border:1px solid var(--border-color-dark);padding:10px;font-size:.85em;text-align:left;display:flex;flex-direction:column-reverse}.combat-log-list p{margin:0 0 4px;line-height:1.4}.log-event-damage{color:var(--color-error)}.log-event-crit{color:var(--color-gold);font-weight:700}.log-event-heal{color:var(--color-success)}.log-event-riposte{color:var(--color-riposte);font-style:italic}.log-event-buff{color:var(--color-accent)}.progression-map-content{max-width:800px;width:90%;height:80vh;display:flex;flex-direction:column}.timeline-container{flex-grow:1;overflow-y:auto;padding:20px;position:relative}.timeline-container:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:4px;height:100%;background-color:var(--border-color-dark);border-radius:2px}.timeline-node{position:relative;margin:60px 0;width:100%;display:flex;justify-content:space-between;align-items:flex-start}.timeline-floor-circle{position:absolute;left:50%;top:0;transform:translate(-50%,-50%);width:50px;height:50px;border-radius:50%;background-color:var(--color-surface);border:3px solid var(--border-color-light);color:var(--color-text-secondary);display:flex;align-items:center;justify-content:center;font-family:var(--font-primary);font-size:1.2em;z-index:10}.timeline-floor-circle.discovered{border-color:var(--color-gold);color:var(--color-gold);box-shadow:0 0 10px var(--color-gold)}.timeline-content{width:45%;padding:15px;background-color:var(--color-surface-light);border:2px solid var(--border-color-dark);border-radius:6px;min-height:50px;position:relative}.timeline-content:empty{visibility:hidden}.timeline-content.left{text-align:right}.timeline-content.right{text-align:left}.timeline-content p{margin:5px 0;font-size:.9em}.final-node p{font-style:italic;color:var(--color-text-secondary)}.final-text{position:relative}#artisan-panel.active{display:flex;flex-direction:column;height:100%}.artisan-resources{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid var(--border-color-light)}.artisan-resources .essence-list{text-align:left;flex-grow:1;min-width:150px}.artisan-recycle-buttons{display:flex;flex-direction:column;gap:10px;align-items:flex-start}.artisan-resources p{margin:2px 0;font-size:.9em}.artisan-resources .btn{padding:6px 10px;font-size:.7em;flex-shrink:0}.artisan-main-layout{display:grid;grid-template-columns:2fr 3fr;gap:15px;flex-grow:1;min-height:0}.artisan-inventory-column{display:flex;flex-direction:column;min-height:0}.artisan-inventory-header{display:flex;justify-content:center;align-items:center;margin-bottom:10px}.artisan-inventory-header h3{margin:0}.artisan-inventory-grid{overflow-y:auto;display:grid;grid-template-columns:1fr;gap:8px;padding-right:10px}.artisan-item-card{display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:var(--color-surface-light);border:2px solid var(--border-color-dark);cursor:pointer;transition:all .2s}.artisan-item-card:hover{border-color:var(--color-gold);transform:scale(1.02)}.artisan-item-card.selected{border-color:var(--color-accent);box-shadow:0 0 8px var(--color-accent)}.artisan-item-info{font-size:.9em}.artisan-workspace{display:flex;flex-direction:column}.artisan-item-slot{min-height:120px;background-color:var(--color-background);border:2px dashed var(--border-color-light);margin-bottom:15px;display:flex;justify-content:center;align-items:center;padding:10px}.artisan-item-slot .placeholder{color:var(--color-text-secondary)}.artisan-actions .tab-buttons{border-bottom-color:var(--border-color-dark)}.artisan-actions .tab-btn{background-color:var(--color-background)}.artisan-actions .tab-btn.active{background-color:var(--color-surface)}.artisan-actions .tab-content{padding:15px;background-color:var(--color-surface)}.artisan-action-description{font-size:.9em;color:var(--color-text-secondary);margin-bottom:15px;min-height:40px}.artisan-reforge-affix-list li{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;padding:5px}.artisan-reforge-affix-list li.locked{opacity:.6}.artisan-reforge-affix-list li button{font-size:.8em;padding:4px 8px}.artisan-cost{margin-top:15px;font-weight:700}.artisan-confirm-btn{width:100%;margin-top:10px;padding:12px;font-size:1em}.shop-items,.inventory-items{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;padding:1rem;height:100%;overflow-y:auto}.shop-actions{padding:1rem;text-align:center;border-bottom:1px solid var(--color-border-light)}.shop-header{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:15px;padding:0 15px;position:relative}.shop-title-group{display:flex;align-items:baseline;gap:10px}.shop-header h2{margin:0}.shop-header-controls{position:absolute;top:15px;right:15px;display:flex;gap:10px;align-items:center}.shop-controls{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:15px;flex-wrap:wrap}.shop-utility-btn{background-color:var(--color-background-dark);color:var(--color-text-primary);border:1px solid var(--color-border);padding:8px 15px;border-radius:var(--border-radius);cursor:pointer;transition:background-color .2s,border-color .2s;font-size:.9em;white-space:nowrap}.shop-utility-btn:hover{background-color:var(--color-surface);border-color:var(--color-accent)}.shop-utility-btn.active{border-color:var(--color-gold);box-shadow:0 0 8px var(--color-gold)}.shop-restock-timer{width:30px;height:30px;border-radius:50%;background:var(--color-background-dark);border:2px solid var(--color-border);position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:.7em;color:var(--color-text-secondary);font-weight:700}.shop-restock-timer:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;background:conic-gradient(var(--color-accent) var(--timer-progress, 0%),transparent var(--timer-progress, 0%));transform:rotate(-90deg)}.shop-item-card{background-color:var(--color-surface-light);position:relative;padding-bottom:1rem}.shop-item-card .buy-item-btn{position:absolute;top:.5rem;right:.5rem;padding:6px 10px;font-size:.8em;background-color:var(--color-gold);color:var(--color-background);border:none;border-radius:4px;cursor:pointer;transition:background-color .2s;z-index:2}.shop-item-card .buy-item-btn:hover:not(:disabled){background-color:#ffec80}.shop-item-card .buy-item-btn:disabled{background-color:#555;color:#999;cursor:not-allowed}.shop-item-card .item-card-header{padding-right:60px}.shop-panel.lock-mode-active .shop-item-card{cursor:pointer}.shop-item-card.locked{border-color:var(--color-gold);box-shadow:0 0 8px var(--color-gold);opacity:.8}.shop-item-card .lock-icon{position:absolute;top:5px;left:5px;font-size:1.2em;color:var(--color-gold);text-shadow:0 0 5px rgba(255,215,0,.5)}#prestige-panel h2{width:100%;text-align:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color-light)}#prestige-cards-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;padding:1rem;height:calc(100% - 60px);overflow-y:auto}.prestige-card{background-color:var(--color-surface-light);border:1px solid var(--border-color-dark);border-left:5px solid var(--color-prestige);padding:1rem;display:flex;flex-direction:column;gap:.5rem;box-shadow:0 2px 4px #0003;transition:all .2s ease-in-out}.prestige-card:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000004d;border-color:var(--color-prestige)}.prestige-card h4{margin:0;color:var(--color-text-primary);font-size:1.1em;border-bottom:1px solid var(--border-color-light);padding-bottom:.5rem;margin-bottom:.5rem}.prestige-card p{flex-grow:1;margin:0;font-size:.9em;color:var(--color-text-secondary);text-align:left}.prestige-card .buy-btn{margin-top:auto;padding:10px;font-size:.9em;background-color:var(--color-prestige);color:#fff;border:none;box-shadow:0 0 8px #e040fb80}.prestige-card .buy-btn:hover:not(:disabled){background-color:#d020f0;box-shadow:0 0 12px #e040fbcc}.trophy-room-content{display:flex;flex-direction:column;width:100%;flex-grow:1;gap:15px;min-height:0}.trophy-sets-container{flex-shrink:0;padding-bottom:15px;border-bottom:2px solid var(--border-color-dark)}.trophy-sets-container h4{margin:0 0 10px;color:var(--color-gold);text-align:center}.trophy-set-list{display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.trophy-set-item{background-color:var(--color-surface);padding:8px 12px;border-radius:4px;border:1px solid var(--border-color-light);font-size:.9em;text-align:center;opacity:.5}.trophy-set-item.unlocked{opacity:1;border-color:var(--color-success);box-shadow:0 0 8px var(--color-success);color:var(--color-success)}.trophy-set-item .set-name{font-weight:700}.trophy-set-item .set-bonus{font-size:.9em;color:var(--color-text-secondary)}.trophy-collection-container{flex-grow:1;min-height:0;overflow-y:auto}.trophy-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;padding:5px}.trophy-card{background-color:var(--color-surface-light);border:2px solid var(--border-color-dark);border-radius:6px;padding:10px;text-align:center;display:flex;flex-direction:column;justify-content:space-between;gap:8px;position:relative;z-index:1}.trophy-card.not-owned{opacity:.4;filter:grayscale(80%)}.trophy-card .trophy-name{font-family:var(--font-primary);font-size:1em;color:var(--color-text-primary)}.trophy-card .trophy-icon{font-size:2.5em;margin:10px 0}.trophy-card .trophy-count{font-size:.9em;color:var(--color-text-secondary)}.trophy-card .trophy-bonus{font-weight:700;color:var(--color-accent)}.tavern-upgrades-grid{display:grid;grid-template-columns:1fr;gap:20px;padding:10px;flex-grow:1;overflow-y:auto}@media (min-width: 768px){.tavern-upgrades-grid{grid-template-columns:1fr 1fr}}.upgrades-section{background-color:var(--color-surface);border:1px solid var(--border-color-dark);border-radius:6px;padding:15px;display:flex;flex-direction:column}.upgrades-section h4{margin:0 0 15px;padding-bottom:10px;border-bottom:2px solid var(--color-gold);color:var(--color-gold);text-align:center;font-size:1.1em}.upgrades-list{display:flex;flex-direction:column;gap:10px}.upgrade-card{background-color:var(--color-background-light);border:1px solid var(--border-color-light);border-left:5px solid var(--color-accent);padding:10px;display:flex;flex-direction:column;gap:5px;box-shadow:0 2px 4px #0000001a;transition:all .2s ease-in-out}.upgrade-card:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.upgrade-card h5{margin:0 0 5px;font-size:1em;color:var(--color-text-primary);border-bottom:1px dashed var(--border-color-dark);padding-bottom:5px}.upgrade-description{font-size:.9em;color:var(--color-text-secondary);flex-grow:1}.upgrade-cost{font-size:.85em;font-weight:700;color:var(--color-gold);margin-top:5px}.upgrade-buy-btn{width:100%;padding:8px;font-size:.8em;margin-top:10px}.free-upgrade{border-left-color:var(--color-success)}.free-upgrade.owned{background-color:var(--color-surface-light);opacity:.8}.free-upgrade.locked-condition{opacity:.5;filter:grayscale(80%);border-left-color:var(--color-text-secondary)}.paid-upgrade{border-left-color:var(--color-gold)}.paid-upgrade.locked-condition{opacity:.5;filter:grayscale(80%);border-left-color:var(--color-text-secondary)}.upgrade-card.max-level{opacity:.7;filter:grayscale(50%);border-left-color:var(--color-text-secondary)}.upgrade-card.max-level .upgrade-buy-btn{display:none}.upgrade-status{font-size:.8em;text-align:center;padding:5px;margin-top:5px;border-radius:3px;font-weight:700}.upgrade-status.locked-condition{background-color:var(--color-error);color:#fff}.upgrade-status.max-level{background-color:var(--color-text-secondary);color:var(--color-background)}.recruitment-sections-container{display:grid;grid-template-columns:1fr;gap:20px;padding:10px;flex-grow:1;overflow-y:auto}@media (min-width: 768px){.recruitment-sections-container{grid-template-columns:1fr 1fr}}.recruitment-section{background-color:var(--color-surface);border:1px solid var(--border-color-dark);border-radius:6px;padding:15px;display:flex;flex-direction:column}.recruitment-section h4{margin:0 0 15px;padding-bottom:10px;border-bottom:2px solid var(--color-gold);color:var(--color-gold);text-align:center;font-size:1.1em}.recruitment-list{display:flex;flex-direction:column;gap:10px;flex-grow:1;overflow-y:auto;padding-right:5px}.recruitment-card{background-color:var(--color-background-light);border:1px solid var(--border-color-light);border-left:5px solid var(--color-accent);padding:10px;display:flex;flex-direction:column;gap:5px;box-shadow:0 2px 4px #0000001a;transition:all .2s ease-in-out}.recruitment-card:hover:not(.recruited):not(.locked){transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.recruitment-card h5{margin:0 0 5px;font-size:1em;color:var(--color-text-primary);border-bottom:1px dashed var(--border-color-dark);padding-bottom:5px}.recruitment-description{font-size:.9em;color:var(--color-text-secondary);flex-grow:1}.recruitment-cost{font-size:.85em;font-weight:700;color:var(--color-gold);margin-top:5px}.recruitment-card .btn{width:100%;padding:8px;font-size:.8em;margin-top:10px}.recruitment-card.recruited{opacity:.7;filter:grayscale(50%);border-left-color:var(--color-success)}.recruitment-card.locked{opacity:.5;filter:grayscale(80%);border-left-color:var(--color-text-secondary)}.unlock-conditions{font-size:.8em;color:var(--color-text-secondary);margin-top:5px;text-align:center}.recruitment-card .recruit-hero-btn{background-color:var(--color-accent);color:var(--color-background)}.recruitment-card .recruit-hero-btn:hover:not(:disabled){background-color:#4caf50}.recruitment-card .recruit-specialist-btn{background-color:#d2691e;color:#fff}.recruitment-card .recruit-specialist-btn:hover:not(:disabled){background-color:sienna}
